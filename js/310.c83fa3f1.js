"use strict";(self["webpackChunkweek6_homework"]=self["webpackChunkweek6_homework"]||[]).push([[310],{1207:function(t,o,c){function s(t){return{all:t=t||new Map,on:function(o,c){var s=t.get(o);s?s.push(c):t.set(o,[c])},off:function(o,c){var s=t.get(o);s&&(c?s.splice(s.indexOf(c)>>>0,1):t.set(o,[]))},emit:function(o,c){var s=t.get(o);s&&s.slice().map((function(t){t(c)})),(s=t.get("*"))&&s.slice().map((function(t){t(o,c)}))}}}c.d(o,{Z:function(){return a}});const e=s();var a=e},6310:function(t,o,c){c.r(o),c.d(o,{default:function(){return N}});var s=c(1831),e=c(6923);const a={class:"container"},d=(0,s._)("h2",{class:"text-center"}," Products ",-1),r={class:"table align-middle"},l=(0,s._)("thead",null,[(0,s._)("tr",{class:"text-center"},[(0,s._)("th",{class:"col-1 text-start"}," Pictrue "),(0,s._)("th",{class:"col-3"}," Product "),(0,s._)("th",{class:"col-3"}," Price "),(0,s._)("th",{class:"col-3"})])],-1),i={class:"fs-5"},n={key:0,class:"fs-5"},u={key:1},p={class:"fs-6 text-decoration-line-through"},h={class:"fs-5"},m={class:"text-end"},_={class:"btn-group btn-group-sm"},g=["onClick"],b=["onClick"];function f(t,o,c,f,v,w){const y=(0,s.up)("ProductModal");return(0,s.wg)(),(0,s.iD)("div",a,[d,(0,s._)("table",r,[l,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(v.products,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id,class:"text-center"},[(0,s._)("td",null,[(0,s._)("div",{style:(0,e.j5)([{width:"200px",height:"150px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${t.imageUrl})`}])},null,4)]),(0,s._)("td",i,(0,e.zw)(t.title),1),(0,s._)("td",null,[t.price===t.origin_price?((0,s.wg)(),(0,s.iD)("p",n," 售價："+(0,e.zw)(t.price),1)):((0,s.wg)(),(0,s.iD)("div",u,[(0,s._)("p",p," 原價 "+(0,e.zw)(t.origin_price)+" 元 ",1),(0,s._)("p",h," 現在只要 "+(0,e.zw)(t.price)+" 元 ",1)]))]),(0,s._)("td",m,[(0,s._)("div",_,[(0,s._)("button",{class:"btn btn-outline-secondary",onClick:o=>w.getProduct(t.id)}," 更多資訊 ",8,g),(0,s._)("button",{class:"btn btn-outline-danger",onClick:o=>w.AddtoCart(t.id)}," 加入購物車 ",8,b)])])])))),128))])]),(0,s.Wm)(y,{ref:"productmodal",product:v.product,onAddToCart:w.AddtoCart},null,8,["product","onAddToCart"])])}var v=c(2847);const w={id:"productmodal",ref:"modal",class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},y={class:"modal-dialog modal-xl"},k={class:"modal-content"},x={class:"modal-header"},C={id:"staticBackdropLabel",class:"modal-title"},z={class:"modal-body"},P={class:"row"},$={class:"col-sm-6"},D=["src"],M={class:"col-sm-6"},q={class:"badge bg-secondary"},A={class:"h6"},Z={class:"h6"},U={key:0,class:"fs-5"},j={key:1},B={class:"fs-6 text-decoration-line-through"},L={class:"fs-5"},O={class:"input-group"},T=(0,s._)("div",{class:"modal-footer"},[(0,s._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ")],-1);function H(t,o,c,a,d,r){return(0,s.wg)(),(0,s.iD)("div",w,[(0,s._)("div",y,[(0,s._)("div",k,[(0,s._)("div",x,[(0,s._)("h5",C,(0,e.zw)(c.product.title),1)]),(0,s._)("div",z,[(0,s._)("div",P,[(0,s._)("div",$,[(0,s._)("img",{class:"img-fluid",src:c.product.imageUrl,alt:""},null,8,D)]),(0,s._)("div",M,[(0,s._)("div",q,(0,e.zw)(c.product.category),1),(0,s._)("div",A," 商品描述：尺寸："+(0,e.zw)(c.product.description),1),(0,s._)("div",Z," 商品內容："+(0,e.zw)(c.product.content),1),(0,s._)("div",null,[c.product.price===c.product.origin_price?((0,s.wg)(),(0,s.iD)("p",U," 售價："+(0,e.zw)(c.product.price),1)):((0,s.wg)(),(0,s.iD)("div",j,[(0,s._)("p",B," 原價 "+(0,e.zw)(c.product.origin_price)+" 元 ",1),(0,s._)("p",L," 現在只要 "+(0,e.zw)(c.product.price)+" 元 ",1)]))]),(0,s._)("div",null,[(0,s._)("div",O,[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":o[0]||(o[0]=t=>d.qty=t),type:"number",class:"form-control"},null,512),[[v.nr,d.qty]]),(0,s._)("button",{class:"btn btn-primary",onClick:o[1]||(o[1]=o=>t.$emit("add-to-cart",c.product.id,d.qty))}," 加入購物車 ")])])])])]),T])])],512)}var I=c(6015),K=c.n(I),V={props:{product:{type:Object,default(){return{}}}},emits:["add-to-cart"],data(){return{status:{},modal:"",qty:1}},mounted(){this.modal=new(K())(this.$refs.modal,{keyboard:!1,backdrop:"static"})},methods:{openModal(){this.modal.show()},hideModal(){this.modal.hide()}}},W=c(497);const Y=(0,W.Z)(V,[["render",H]]);var E=Y,F=c(1207),G={components:{ProductModal:E},data(){return{products:[],product:{}}},mounted(){this.getProducts()},methods:{getProducts(){this.$http("https://vue3-course-api.hexschool.io/v2/api/necy6553/products/all").then((t=>{this.products=t.data.products})).catch((t=>{console.log(t)}))},getProduct(t){this.$http(`https://vue3-course-api.hexschool.io/v2/api/necy6553/product/${t}`).then((t=>{this.product=t.data.product,this.$refs.productmodal.openModal()})).catch((t=>{console.log(t)}))},AddtoCart(t,o=1){const c={product_id:t,qty:o};this.$http.post("https://vue3-course-api.hexschool.io/v2/api/necy6553/cart",{data:c}).then((t=>{F.Z.emit("get-cart"),this.$refs.productmodal.hideModal()})).catch((t=>{console.log(t)}))}}};const J=(0,W.Z)(G,[["render",f]]);var N=J}}]);
//# sourceMappingURL=310.c83fa3f1.js.map